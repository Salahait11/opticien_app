<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres du Système</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap">
     <style>
    	/* style.css */
body {
    font-family: 'Nunito', sans-serif; /* Police Google Fonts */
    background-color: #f8f9fa;
    color: #343a40; /* Couleur de texte principale */
}

/* Style du menu latéral */
.sidebar {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    z-index: 100;
    padding: 0;
    box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
    transition: all 0.3s ease;
    background-color: #fff; /* Fond blanc pour le menu */
}

.sidebar .nav-link {
    font-weight: 500;
    color: #495057;
    transition: color 0.2s ease;
}

.sidebar .nav-link .fas {
    margin-right: 0.5rem;
}

.sidebar .nav-link.active {
    color: #0056b3; /* Bleu plus foncé pour l'actif */
    background-color: rgba(0, 86, 179, 0.1); /* Fond bleu clair pour l'actif */
}

.sidebar .nav-link:hover {
    background-color: #e9ecef;
    color: #0056b3;
}

/* Style des cartes de statistiques */
.stat-card {
    border-radius: 0.25rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, .075);
    transition: transform 0.2s ease;
    border-left: 5px solid; /* Bordure gauche colorée
    transition: transform 0.2s ease;
border-left: 5px solid; /* Bordure gauche colorée */
}

.stat-card:hover {
transform: translateY(-3px);
}

.stat-card .card-title {
font-size: 1.1rem;
margin-bottom: 0.5rem;
color: #495057;
}

.stat-card.paiements {
border-left-color: #dc3545; /* Rouge */
background-color: #fdeded;
}

.stat-card.ordonnances {
border-left-color: #ffc107; /* Jaune */
background-color: #fff9ed;
}

.stat-card.stock {
border-left-color: #007bff; /* Bleu */
background-color: #e5f3ff;
}

.breadcrumb {
background-color: transparent;
padding: 0.75rem 1rem;
margin-bottom: 0;
}

/* Style de la zone de contenu principal */
.main-content {
padding-top: 1rem;
padding-bottom: 1rem;
}

/* Animations */
.animate__animated {
animation-duration: 0.75s;
}

/* Custom Icons for Stats Cards */
.fa-chart-line {
font-size: 0.8em;
margin-left: 0.3em;
color: #6c757d;
}

/* Couleur d'accentuation */
.accent-color {
color: #007bff;
}

/* Header Color */
.h2 {
color: #333;
}

/* Style spécifique pour la gestion des clients */
.search-bar {
margin-bottom: 20px;
}

.btn-success {
background-color: #28a745;
border-color: #28a745;
}

.btn-success:hover {
background-color: #218838;
border-color: #1e7e34;
}
    </style>

</head>
<body>

<div class="container-fluid">
    <div class="row">

        <!-- Menu de Navigation Vertical (Gauche) -->
        <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
            <div class="position-sticky pt-3">
                <a class="navbar-brand d-flex justify-content-center align-items-center px-3 mb-3" href="#">
                    <i class="fas fa-clinic-medical fa-2x accent-color"></i>
                    <span class="ms-2">OptiManage</span>
                </a>
                <ul class="nav flex-column">
                     <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="fas fa-home fa-fw"></i>
                            Accueil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="clients.html">
                            <i class="fas fa-users fa-fw"></i>
                            Clients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="medecins.html">
                            <i class="fas fa-user-md fa-fw"></i>
                            Médecins
                        </a>
                    </li>
                     <li class="nav-item">
                        <a class="nav-link" href="ordonnances.html">
                            <i class="fas fa-file-prescription fa-fw"></i>
                            Ordonnances
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ventes.html">
                            <i class="fas fa-shopping-cart fa-fw"></i>
                            Ventes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="paiements.html">
                            <i class="fas fa-money-bill-wave fa-fw"></i>
                            Paiements
                        </a>
                    </li>
                     <li class="nav-item">
                        <a class="nav-link" href="stock.html">
                            <i class="fas fa-box fa-fw"></i>
                            Stock
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">
                            <i class="fas fa-cog fa-fw"></i>
                            Paramètres
                        </a>
                    </li>
                </ul>
                <hr>
                <div class="dropdown px-3">
                    <a href="#" class="d-flex align-items-center text-dark text-decoration-none dropdown-toggle"
                       id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="https://github.com/mdo.png" alt="hugenerd" width="30" height="30"
                             class="rounded-circle me-2">
                        <strong>Utilisateur</strong>
                    </a>
                    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser1">
                        <li><a class="dropdown-item" href="#">Profil</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#">Déconnexion</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Contenu Principal (Droite) -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">

            <!-- Fil d'Ariane -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Accueil</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Paramètres</li>
                </ol>
            </nav>

            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2"><i class="fas fa-cog fa-fw accent-color"></i> Paramètres du Système</h1>
            </div>

            <!-- Informations du Magasin -->
            <section class="mb-4">
                <h2>Informations du Magasin</h2>
                <form id="magasinForm">
                    <div class="mb-3">
                        <label for="nomMagasin" class="form-label">Nom du Magasin</label>
                        <input type="text" class="form-control" id="nomMagasin" value="OptiManage Store">
                    </div>
                    <div class="mb-3">
                        <label for="adresseMagasin" class="form-label">Adresse</label>
                        <input type="text" class="form-control" id="adresseMagasin" value="123 Rue Principale">
                    </div>
                    <div class="mb-3">
                        <label for="telephoneMagasin" class="form-label">Téléphone</label>
                        <input type="tel" class="form-control" id="telephoneMagasin" value="0522334455">
                    </div>
                    <div class="mb-3">
                        <label for="emailMagasin" class="form-label">Email</label>
                        <input type="email" class="form-control" id="emailMagasin" value="contact@optimanage.com">
                    </div>
                    <button type="submit" class="btn btn-primary">Enregistrer les Informations</button>
                </form>
            </section>

            <!-- Gestion des Utilisateurs -->
            <section class="mb-4">
                <h2>Gestion des Utilisateurs</h2>
                <button class="btn btn-success mb-2" data-bs-toggle="modal" data-bs-target="#utilisateurModal"><i class="fas fa-plus"></i> Ajouter un Utilisateur</button>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Email</th>
                            <th>Rôle</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody id="utilisateurTableBody">
                        <!-- Les données des utilisateurs seront ajoutées ici par JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Configuration des Modes de Paiement -->
            <section class="mb-4">
                <h2>Modes de Paiement</h2>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="especes" id="especesCheckbox" checked>
                    <label class="form-check-label" for="especesCheckbox">
                        Espèces
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="carte" id="carteCheckbox" checked>
                    <label class="form-check-label" for="carteCheckbox">
                        Carte Bancaire
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="virement" id="virementCheckbox">
                    <label class="form-check-label" for="virementCheckbox">
                        Virement Bancaire
                    </label>
                </div>
                <button type="button" class="btn btn-primary mt-2">Enregistrer les Modes de Paiement</button>
            </section>

            <!-- Personnalisation de l'Application -->
            <section>
                <h2>Personnalisation</h2>
                <div class="mb-3">
                    <label for="langueSelect" class="form-label">Langue</label>
                    <select class="form-select" id="langueSelect">
                        <option value="fr">Français</option>
                        <option value="en">Anglais</option>
                    </select>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="notifications" id="notificationsCheckbox" checked>
                    <label class="form-check-label" for="notificationsCheckbox">
                        Activer les Notifications
                    </label>
                </div>
                <button type="button" class="btn btn-primary mt-2">Enregistrer les Préférences</button>
            </section>

        </main>
    </div>
</div>

<!-- Modal pour Ajouter/Modifier un Utilisateur -->
<div class="modal fade" id="utilisateurModal" tabindex="-1" aria-labelledby="utilisateurModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="utilisateurModalLabel">Ajouter un Utilisateur</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="utilisateurForm">
                    <input type="hidden" id="utilisateurId">
                    <div class="mb-3">
                        <label for="nomUtilisateur" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="nomUtilisateur" required>
                    </div>
                    <div class="mb-3">
                        <label for="emailUtilisateur" class="form-label">Email</label>
                        <input type="email" class="form-control" id="emailUtilisateur" required>
                    </div>
                    <div class="mb-3">
                        <label for="roleUtilisateur" class="form-label">Rôle</label>
                        <select class="form-select" id="roleUtilisateur">
                            <option value="admin">Administrateur</option>
                            <option value="utilisateur">Utilisateur</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="motDePasseUtilisateur" class="form-label">Mot de Passe</label>
                        <input type="password" class="form-control" id="motDePasseUtilisateur" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" id="saveUtilisateur">Enregistrer</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  // Gestion des paramètres (parametres.html)
  if (document.getElementById('magasinForm')) {
    const magasinForm = document.getElementById('magasinForm');
    const nomMagasinInput = document.getElementById('nomMagasin');
    const adresseMagasinInput = document.getElementById('adresseMagasin');
    const telephoneMagasinInput = document.getElementById('telephoneMagasin');
    const emailMagasinInput = document.getElementById('emailMagasin');
    const utilisateurTableBody = document.getElementById('utilisateurTableBody');
    const utilisateurForm = document.getElementById('utilisateurForm');
    const utilisateurModal = new bootstrap.Modal(document.getElementById('utilisateurModal'));
    const utilisateurIdInput = document.getElementById('utilisateurId');
    const nomUtilisateurInput = document.getElementById('nomUtilisateur');
    const emailUtilisateurInput = document.getElementById('emailUtilisateur');
    const roleUtilisateurSelect = document.getElementById('roleUtilisateur');
    const motDePasseUtilisateurInput = document.getElementById('motDePasseUtilisateur');
    const saveUtilisateurButton = document.getElementById('saveUtilisateur');
    const especesCheckbox = document.getElementById('especesCheckbox');
    const carteCheckbox = document.getElementById('carteCheckbox');
    const virementCheckbox = document.getElementById('virementCheckbox');
    const langueSelect = document.getElementById('langueSelect');
    const notificationsCheckbox = document.getElementById('notificationsCheckbox');

    let utilisateurs = [
      { id: 1, nom: 'Admin', email: 'admin@optimanage.com', role: 'admin' }
    ];

    // Affichage des utilisateurs
    function displayUtilisateurs() {
      utilisateurTableBody.innerHTML = '';
      utilisateurs.forEach(utilisateur => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${utilisateur.nom}</td>
          <td>${utilisateur.email}</td>
          <td>${utilisateur.role}</td>
          <td>
            <button class="btn btn-sm btn-primary edit-utilisateur" data-id="${utilisateur.id}"><i class="fas fa-edit"></i> Modifier</button>
            <button class="btn btn-sm btn-danger delete-utilisateur" data-id="${utilisateur.id}"><i class="fas fa-trash-alt"></i> Supprimer</button>
          </td>
        `;
        utilisateurTableBody.appendChild(row);
      });
    }

    // Ajout/Modification d'un utilisateur
    function saveUtilisateur() {
      const utilisateurId = utilisateurIdInput.value;
      const nom = nomUtilisateurInput.value;
      const email = emailUtilisateurInput.value;
      const role = roleUtilisateurSelect.value;
      const motDePasse = motDePasseUtilisateurInput.value;

      if (!nom || !email || !motDePasse) {
        alert('Veuillez remplir tous les champs.');
        return;
      }

      const utilisateurData = { nom: nom, email: email, role: role };

      if (utilisateurId) {
        utilisateurs = utilisateurs.map(utilisateur => utilisateur.id === parseInt(utilisateurId) ? { id: utilisateur.id, ...utilisateurData } : utilisateur);
      } else {
        const newId = utilisateurs.length > 0 ? Math.max(...utilisateurs.map(u => u.id)) + 1 : 1;
        utilisateurs.push({ id: newId, ...utilisateurData });
      }

      displayUtilisateurs();
      utilisateurModal.hide();
      clearUtilisateurForm();
    }

    function clearUtilisateurForm() {
      utilisateurIdInput.value = '';
      nomUtilisateurInput.value = '';
      emailUtilisateurInput.value = '';
      roleUtilisateurSelect.value = 'utilisateur';
      motDePasseUtilisateurInput.value = '';
    }

    // Gestion des événements
    magasinForm.addEventListener('submit', function (event) {
      event.preventDefault();
      const nomMagasin = nomMagasinInput.value;
      const adresseMagasin = adresseMagasinInput.value;
      const telephoneMagasin = telephoneMagasinInput.value;
      const emailMagasin = emailMagasinInput.value;

      // Logique pour enregistrer les informations du magasin
      alert('Informations du magasin enregistrées.');
    });

    saveUtilisateurButton.addEventListener('click', saveUtilisateur);

    utilisateurTableBody.addEventListener('click', function (event) {
      if (event.target.classList.contains('edit-utilisateur')) {
        const utilisateurId = event.target.dataset.id;
        const utilisateur = utilisateurs.find(u => u.id === parseInt(utilisateurId));
        if (utilisateur) {
          utilisateurIdInput.value = utilisateur.id;
          nomUtilisateurInput.value = utilisateur.nom;
          emailUtilisateurInput.value = utilisateur.email;
          roleUtilisateurSelect.value = utilisateur.role;
          utilisateurModal.show();
        }
      } else if (event.target.classList.contains('delete-utilisateur')) {
        const utilisateurId = event.target.dataset.id;
        if (confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ?')) {
          utilisateurs = utilisateurs.filter(u => u.id !== parseInt(utilisateurId));
          displayUtilisateurs();
        }
      }
    });

    document.getElementById('utilisateurModal').addEventListener('show.bs.modal', function (event) {
          if (!utilisateurIdInput.value) {
                clearUtilisateurForm()
               // Efface le formulaire si on est en mode création
               document.getElementById('utilisateurModalLabel').textContent = 'Ajouter un Utilisateur';

            } else {
              document.getElementById('utilisateurModalLabel').textContent = 'Modifier l\'Utilisateur';

            }
        });

    displayUtilisateurs();
  }
});
</script>

</body>
</html>